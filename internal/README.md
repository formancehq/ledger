<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# ledger

```go
import "github.com/formancehq/ledger/internal"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func ComputeIdempotencyHash\(inputs any\) string](<#ComputeIdempotencyHash>)
- [func ComputeMetadata\(key, value string\) metadata.Metadata](<#ComputeMetadata>)
- [func MarkReverts\(m metadata.Metadata, txID uint64\) metadata.Metadata](<#MarkReverts>)
- [func ResolveFilterTemplate\(body json.RawMessage, vars map\[string\]string\) \(query.Builder, error\)](<#ResolveFilterTemplate>)
- [func RevertMetadata\(txID uint64\) metadata.Metadata](<#RevertMetadata>)
- [func RevertMetadataSpecKey\(\) string](<#RevertMetadataSpecKey>)
- [func SpecMetadata\(name string\) string](<#SpecMetadata>)
- [func ValidateSegment\(addr string\) bool](<#ValidateSegment>)
- [type Account](<#Account>)
  - [func \(a Account\) GetAddress\(\) string](<#Account.GetAddress>)
- [type AccountMetadata](<#AccountMetadata>)
- [type AccountWithDefaultMetadata](<#AccountWithDefaultMetadata>)
- [type AccountsVolumes](<#AccountsVolumes>)
- [type AggregatedVolumes](<#AggregatedVolumes>)
- [type Balances](<#Balances>)
- [type BalancesByAssets](<#BalancesByAssets>)
- [type BalancesByAssetsByAccounts](<#BalancesByAssetsByAccounts>)
- [type ChartAccount](<#ChartAccount>)
  - [func \(c \*ChartAccount\) DefaultMetadata\(\) metadata.Metadata](<#ChartAccount.DefaultMetadata>)
- [type ChartAccountMetadata](<#ChartAccountMetadata>)
- [type ChartAccountRules](<#ChartAccountRules>)
- [type ChartOfAccounts](<#ChartOfAccounts>)
  - [func \(c \*ChartOfAccounts\) FindAccountSchema\(account string\) \(\*ChartAccount, error\)](<#ChartOfAccounts.FindAccountSchema>)
  - [func \(s ChartOfAccounts\) MarshalJSON\(\) \(\[\]byte, error\)](<#ChartOfAccounts.MarshalJSON>)
  - [func \(s \*ChartOfAccounts\) UnmarshalJSON\(data \[\]byte\) error](<#ChartOfAccounts.UnmarshalJSON>)
  - [func \(c \*ChartOfAccounts\) ValidatePosting\(posting Posting\) error](<#ChartOfAccounts.ValidatePosting>)
- [type ChartSegment](<#ChartSegment>)
  - [func \(s ChartSegment\) MarshalJSON\(\) \(\[\]byte, error\)](<#ChartSegment.MarshalJSON>)
  - [func \(s \*ChartSegment\) UnmarshalJSON\(data \[\]byte\) error](<#ChartSegment.UnmarshalJSON>)
- [type ChartVariableSegment](<#ChartVariableSegment>)
  - [func \(s ChartVariableSegment\) MarshalJSON\(\) \(\[\]byte, error\)](<#ChartVariableSegment.MarshalJSON>)
- [type Configuration](<#Configuration>)
  - [func NewDefaultConfiguration\(\) Configuration](<#NewDefaultConfiguration>)
  - [func \(c \*Configuration\) SetDefaults\(\)](<#Configuration.SetDefaults>)
  - [func \(c \*Configuration\) Validate\(\) error](<#Configuration.Validate>)
- [type CreatedTransaction](<#CreatedTransaction>)
  - [func \(p CreatedTransaction\) GetMemento\(\) any](<#CreatedTransaction.GetMemento>)
  - [func \(p CreatedTransaction\) NeedsSchema\(\) bool](<#CreatedTransaction.NeedsSchema>)
  - [func \(p CreatedTransaction\) Type\(\) LogType](<#CreatedTransaction.Type>)
  - [func \(p CreatedTransaction\) ValidateWithSchema\(schema Schema\) error](<#CreatedTransaction.ValidateWithSchema>)
- [type DeletedMetadata](<#DeletedMetadata>)
  - [func \(p DeletedMetadata\) NeedsSchema\(\) bool](<#DeletedMetadata.NeedsSchema>)
  - [func \(s DeletedMetadata\) Type\(\) LogType](<#DeletedMetadata.Type>)
  - [func \(s \*DeletedMetadata\) UnmarshalJSON\(data \[\]byte\) error](<#DeletedMetadata.UnmarshalJSON>)
  - [func \(s DeletedMetadata\) ValidateWithSchema\(schema Schema\) error](<#DeletedMetadata.ValidateWithSchema>)
- [type ErrAlreadyStarted](<#ErrAlreadyStarted>)
  - [func NewErrAlreadyStarted\(id string\) ErrAlreadyStarted](<#NewErrAlreadyStarted>)
  - [func \(e ErrAlreadyStarted\) Error\(\) string](<#ErrAlreadyStarted.Error>)
  - [func \(e ErrAlreadyStarted\) Is\(err error\) bool](<#ErrAlreadyStarted.Is>)
- [type ErrInvalidAccount](<#ErrInvalidAccount>)
  - [func \(e ErrInvalidAccount\) Error\(\) string](<#ErrInvalidAccount.Error>)
  - [func \(e ErrInvalidAccount\) Is\(err error\) bool](<#ErrInvalidAccount.Is>)
- [type ErrInvalidBucketName](<#ErrInvalidBucketName>)
  - [func \(e ErrInvalidBucketName\) Error\(\) string](<#ErrInvalidBucketName.Error>)
  - [func \(e ErrInvalidBucketName\) Is\(err error\) bool](<#ErrInvalidBucketName.Is>)
- [type ErrInvalidLedgerName](<#ErrInvalidLedgerName>)
  - [func \(e ErrInvalidLedgerName\) Error\(\) string](<#ErrInvalidLedgerName.Error>)
  - [func \(e ErrInvalidLedgerName\) Is\(err error\) bool](<#ErrInvalidLedgerName.Is>)
- [type ErrInvalidSchema](<#ErrInvalidSchema>)
  - [func NewErrInvalidSchema\(err error\) ErrInvalidSchema](<#NewErrInvalidSchema>)
  - [func \(e ErrInvalidSchema\) Error\(\) string](<#ErrInvalidSchema.Error>)
  - [func \(e ErrInvalidSchema\) Is\(err error\) bool](<#ErrInvalidSchema.Is>)
- [type ErrPipelineAlreadyExists](<#ErrPipelineAlreadyExists>)
  - [func NewErrPipelineAlreadyExists\(pipelineConfiguration PipelineConfiguration\) ErrPipelineAlreadyExists](<#NewErrPipelineAlreadyExists>)
  - [func \(e ErrPipelineAlreadyExists\) Error\(\) string](<#ErrPipelineAlreadyExists.Error>)
  - [func \(e ErrPipelineAlreadyExists\) Is\(err error\) bool](<#ErrPipelineAlreadyExists.Is>)
- [type ErrPipelineNotFound](<#ErrPipelineNotFound>)
  - [func NewErrPipelineNotFound\(id string\) ErrPipelineNotFound](<#NewErrPipelineNotFound>)
  - [func \(e ErrPipelineNotFound\) Error\(\) string](<#ErrPipelineNotFound.Error>)
  - [func \(e ErrPipelineNotFound\) Is\(err error\) bool](<#ErrPipelineNotFound.Is>)
- [type Exporter](<#Exporter>)
  - [func NewExporter\(configuration ExporterConfiguration\) Exporter](<#NewExporter>)
- [type ExporterConfiguration](<#ExporterConfiguration>)
  - [func NewExporterConfiguration\(driver string, config json.RawMessage\) ExporterConfiguration](<#NewExporterConfiguration>)
- [type InsertedSchema](<#InsertedSchema>)
  - [func \(p InsertedSchema\) NeedsSchema\(\) bool](<#InsertedSchema.NeedsSchema>)
  - [func \(u InsertedSchema\) Type\(\) LogType](<#InsertedSchema.Type>)
  - [func \(u InsertedSchema\) ValidateWithSchema\(schema Schema\) error](<#InsertedSchema.ValidateWithSchema>)
- [type Ledger](<#Ledger>)
  - [func MustNewWithDefault\(name string\) Ledger](<#MustNewWithDefault>)
  - [func New\(name string, configuration Configuration\) \(\*Ledger, error\)](<#New>)
  - [func NewWithDefaults\(name string\) \(\*Ledger, error\)](<#NewWithDefaults>)
  - [func \(l Ledger\) HasFeature\(feature, value string\) bool](<#Ledger.HasFeature>)
  - [func \(l Ledger\) WithMetadata\(m metadata.Metadata\) Ledger](<#Ledger.WithMetadata>)
- [type Log](<#Log>)
  - [func NewLog\(payload LogPayload\) Log](<#NewLog>)
  - [func \(l Log\) ChainLog\(previous \*Log\) Log](<#Log.ChainLog>)
  - [func \(l \*Log\) ComputeHash\(previous \*Log\)](<#Log.ComputeHash>)
  - [func \(l \*Log\) UnmarshalJSON\(data \[\]byte\) error](<#Log.UnmarshalJSON>)
  - [func \(l Log\) ValidateWithSchema\(schema Schema\) error](<#Log.ValidateWithSchema>)
  - [func \(l Log\) WithDate\(date time.Time\) Log](<#Log.WithDate>)
  - [func \(l Log\) WithID\(i uint64\) Log](<#Log.WithID>)
  - [func \(l Log\) WithIdempotencyKey\(key string\) Log](<#Log.WithIdempotencyKey>)
- [type LogPayload](<#LogPayload>)
  - [func HydrateLog\(\_type LogType, data \[\]byte\) \(LogPayload, error\)](<#HydrateLog>)
- [type LogType](<#LogType>)
  - [func LogTypeFromString\(logType string\) LogType](<#LogTypeFromString>)
  - [func \(lt LogType\) MarshalJSON\(\) \(\[\]byte, error\)](<#LogType.MarshalJSON>)
  - [func \(lt \*LogType\) Scan\(src interface\{\}\) error](<#LogType.Scan>)
  - [func \(lt LogType\) String\(\) string](<#LogType.String>)
  - [func \(lt \*LogType\) UnmarshalJSON\(data \[\]byte\) error](<#LogType.UnmarshalJSON>)
  - [func \(lt LogType\) Value\(\) \(driver.Value, error\)](<#LogType.Value>)
- [type Memento](<#Memento>)
- [type Move](<#Move>)
- [type Moves](<#Moves>)
  - [func \(m Moves\) ComputePostCommitEffectiveVolumes\(\) PostCommitVolumes](<#Moves.ComputePostCommitEffectiveVolumes>)
- [type Pipeline](<#Pipeline>)
  - [func NewPipeline\(pipelineConfiguration PipelineConfiguration\) Pipeline](<#NewPipeline>)
- [type PipelineConfiguration](<#PipelineConfiguration>)
  - [func NewPipelineConfiguration\(ledger, exporterID string\) PipelineConfiguration](<#NewPipelineConfiguration>)
  - [func \(p PipelineConfiguration\) String\(\) string](<#PipelineConfiguration.String>)
- [type PostCommitVolumes](<#PostCommitVolumes>)
  - [func \(a PostCommitVolumes\) AddInput\(account, asset string, input \*big.Int\)](<#PostCommitVolumes.AddInput>)
  - [func \(a PostCommitVolumes\) AddOutput\(account, asset string, output \*big.Int\)](<#PostCommitVolumes.AddOutput>)
  - [func \(a PostCommitVolumes\) Copy\(\) PostCommitVolumes](<#PostCommitVolumes.Copy>)
  - [func \(a PostCommitVolumes\) Merge\(volumes PostCommitVolumes\) PostCommitVolumes](<#PostCommitVolumes.Merge>)
  - [func \(a PostCommitVolumes\) SubtractPostings\(postings Postings\) PostCommitVolumes](<#PostCommitVolumes.SubtractPostings>)
- [type Posting](<#Posting>)
  - [func NewPosting\(source string, destination string, asset string, amount \*big.Int\) Posting](<#NewPosting>)
  - [func \(p Posting\) GetDestination\(\) string](<#Posting.GetDestination>)
  - [func \(p Posting\) GetSource\(\) string](<#Posting.GetSource>)
- [type Postings](<#Postings>)
  - [func \(p Postings\) Reverse\(\) Postings](<#Postings.Reverse>)
  - [func \(p Postings\) Validate\(\) \(int, error\)](<#Postings.Validate>)
- [type QueryMode](<#QueryMode>)
- [type QueryTemplate](<#QueryTemplate>)
- [type QueryTemplateParams](<#QueryTemplateParams>)
  - [func \(q \*QueryTemplateParams\) Overwrite\(other QueryTemplateParams\)](<#QueryTemplateParams.Overwrite>)
  - [func \(q \*QueryTemplateParams\) UnmarshalJSON\(data \[\]byte\) error](<#QueryTemplateParams.UnmarshalJSON>)
- [type QueryTemplates](<#QueryTemplates>)
- [type ResourceKind](<#ResourceKind>)
- [type RevertedTransaction](<#RevertedTransaction>)
  - [func \(r RevertedTransaction\) GetMemento\(\) any](<#RevertedTransaction.GetMemento>)
  - [func \(p RevertedTransaction\) NeedsSchema\(\) bool](<#RevertedTransaction.NeedsSchema>)
  - [func \(r RevertedTransaction\) Type\(\) LogType](<#RevertedTransaction.Type>)
  - [func \(r RevertedTransaction\) ValidateWithSchema\(schema Schema\) error](<#RevertedTransaction.ValidateWithSchema>)
- [type RunQueryTemplateParams](<#RunQueryTemplateParams>)
- [type RuntimeType](<#RuntimeType>)
- [type SavedMetadata](<#SavedMetadata>)
  - [func \(p SavedMetadata\) NeedsSchema\(\) bool](<#SavedMetadata.NeedsSchema>)
  - [func \(s SavedMetadata\) Type\(\) LogType](<#SavedMetadata.Type>)
  - [func \(s \*SavedMetadata\) UnmarshalJSON\(data \[\]byte\) error](<#SavedMetadata.UnmarshalJSON>)
  - [func \(s SavedMetadata\) ValidateWithSchema\(schema Schema\) error](<#SavedMetadata.ValidateWithSchema>)
- [type Schema](<#Schema>)
  - [func NewSchema\(version string, data SchemaData\) \(Schema, error\)](<#NewSchema>)
- [type SchemaData](<#SchemaData>)
- [type Transaction](<#Transaction>)
  - [func NewTransaction\(\) Transaction](<#NewTransaction>)
  - [func \(tx \*Transaction\) AccountsWithDefaultMetadata\(schema \*Schema, accountMetadata map\[string\]metadata.Metadata\) \[\]AccountWithDefaultMetadata](<#Transaction.AccountsWithDefaultMetadata>)
  - [func \(tx Transaction\) InvolvedAccounts\(\) \[\]string](<#Transaction.InvolvedAccounts>)
  - [func \(tx Transaction\) InvolvedDestinations\(\) map\[string\]\[\]string](<#Transaction.InvolvedDestinations>)
  - [func \(tx Transaction\) IsReverted\(\) bool](<#Transaction.IsReverted>)
  - [func \(Transaction\) JSONSchemaExtend\(schema \*jsonschema.Schema\)](<#Transaction.JSONSchemaExtend>)
  - [func \(tx Transaction\) MarshalJSON\(\) \(\[\]byte, error\)](<#Transaction.MarshalJSON>)
  - [func \(tx Transaction\) Reverse\(\) Transaction](<#Transaction.Reverse>)
  - [func \(tx Transaction\) VolumeUpdates\(\) \[\]AccountsVolumes](<#Transaction.VolumeUpdates>)
  - [func \(tx Transaction\) WithID\(id uint64\) Transaction](<#Transaction.WithID>)
  - [func \(tx Transaction\) WithInsertedAt\(date time.Time\) Transaction](<#Transaction.WithInsertedAt>)
  - [func \(tx Transaction\) WithMetadata\(m metadata.Metadata\) Transaction](<#Transaction.WithMetadata>)
  - [func \(tx Transaction\) WithPostCommitEffectiveVolumes\(volumes PostCommitVolumes\) Transaction](<#Transaction.WithPostCommitEffectiveVolumes>)
  - [func \(tx Transaction\) WithPostCommitVolumes\(volumes PostCommitVolumes\) Transaction](<#Transaction.WithPostCommitVolumes>)
  - [func \(tx Transaction\) WithPostings\(postings ...Posting\) Transaction](<#Transaction.WithPostings>)
  - [func \(tx Transaction\) WithReference\(ref string\) Transaction](<#Transaction.WithReference>)
  - [func \(tx Transaction\) WithRevertedAt\(timestamp time.Time\) Transaction](<#Transaction.WithRevertedAt>)
  - [func \(tx Transaction\) WithTemplate\(template string\) Transaction](<#Transaction.WithTemplate>)
  - [func \(tx Transaction\) WithTimestamp\(ts time.Time\) Transaction](<#Transaction.WithTimestamp>)
  - [func \(tx Transaction\) WithUpdatedAt\(at time.Time\) Transaction](<#Transaction.WithUpdatedAt>)
- [type TransactionData](<#TransactionData>)
  - [func NewTransactionData\(\) TransactionData](<#NewTransactionData>)
  - [func \(data TransactionData\) WithPostings\(postings ...Posting\) TransactionData](<#TransactionData.WithPostings>)
- [type TransactionTemplate](<#TransactionTemplate>)
- [type TransactionTemplates](<#TransactionTemplates>)
  - [func \(t TransactionTemplates\) Validate\(\) error](<#TransactionTemplates.Validate>)
- [type Transactions](<#Transactions>)
- [type VarSpec](<#VarSpec>)
  - [func \(p \*VarSpec\) UnmarshalJSON\(b \[\]byte\) error](<#VarSpec.UnmarshalJSON>)
- [type Volumes](<#Volumes>)
  - [func NewEmptyVolumes\(\) Volumes](<#NewEmptyVolumes>)
  - [func NewVolumesInt64\(input, output int64\) Volumes](<#NewVolumesInt64>)
  - [func \(v Volumes\) Balance\(\) \*big.Int](<#Volumes.Balance>)
  - [func \(v Volumes\) Copy\(\) Volumes](<#Volumes.Copy>)
  - [func \(Volumes\) JSONSchemaExtend\(schema \*jsonschema.Schema\)](<#Volumes.JSONSchemaExtend>)
  - [func \(v Volumes\) MarshalJSON\(\) \(\[\]byte, error\)](<#Volumes.MarshalJSON>)
  - [func \(v \*Volumes\) Scan\(src interface\{\}\) error](<#Volumes.Scan>)
  - [func \(v Volumes\) Value\(\) \(driver.Value, error\)](<#Volumes.Value>)
- [type VolumesByAssets](<#VolumesByAssets>)
  - [func \(v VolumesByAssets\) Balances\(\) BalancesByAssets](<#VolumesByAssets.Balances>)
- [type VolumesWithBalance](<#VolumesWithBalance>)
- [type VolumesWithBalanceByAssetByAccount](<#VolumesWithBalanceByAssetByAccount>)
- [type VolumesWithBalanceByAssets](<#VolumesWithBalanceByAssets>)


## Constants

<a name="StateInitializing"></a>

```go
const (
    StateInitializing = "initializing"
    StateInUse        = "in-use"
)
```

<a name="MetaTargetTypeAccount"></a>

```go
const (
    MetaTargetTypeAccount     = "ACCOUNT"
    MetaTargetTypeTransaction = "TRANSACTION"
)
```

<a name="DefaultBucket"></a>

```go
const (
    DefaultBucket = "_default"
)
```

<a name="METADATA_KEY"></a>

```go
const METADATA_KEY = PROPERTY_PREFIX + "metadata"
```

<a name="PATTERN_KEY"></a>

```go
const PATTERN_KEY = PROPERTY_PREFIX + "pattern"
```

<a name="PROPERTY_PREFIX"></a>

```go
const PROPERTY_PREFIX = "."
```

<a name="RULES_KEY"></a>

```go
const RULES_KEY = PROPERTY_PREFIX + "rules"
```

<a name="SELF_KEY"></a>

```go
const SELF_KEY = PROPERTY_PREFIX + "self"
```

<a name="WORLD"></a>

```go
const (
    WORLD = "world"
)
```

## Variables

<a name="ChartSegmentRegexp"></a>

```go
var ChartSegmentRegexp = regexp.MustCompile(`^(\$|\.)?[a-zA-Z0-9_-]+$`)
```

<a name="Zero"></a>

```go
var Zero = big.NewInt(0)
```

<a name="ComputeIdempotencyHash"></a>
## func [ComputeIdempotencyHash](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L457>)

```go
func ComputeIdempotencyHash(inputs any) string
```



<a name="ComputeMetadata"></a>
## func [ComputeMetadata](<https://github.com/formancehq/ledger/blob/main/internal/metadata.go#L29>)

```go
func ComputeMetadata(key, value string) metadata.Metadata
```



<a name="MarkReverts"></a>
## func [MarkReverts](<https://github.com/formancehq/ledger/blob/main/internal/metadata.go#L21>)

```go
func MarkReverts(m metadata.Metadata, txID uint64) metadata.Metadata
```



<a name="ResolveFilterTemplate"></a>
## func [ResolveFilterTemplate](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L140>)

```go
func ResolveFilterTemplate(body json.RawMessage, vars map[string]string) (query.Builder, error)
```

Resolve filter template using the provided vars

<a name="RevertMetadata"></a>
## func [RevertMetadata](<https://github.com/formancehq/ledger/blob/main/internal/metadata.go#L35>)

```go
func RevertMetadata(txID uint64) metadata.Metadata
```



<a name="RevertMetadataSpecKey"></a>
## func [RevertMetadataSpecKey](<https://github.com/formancehq/ledger/blob/main/internal/metadata.go#L25>)

```go
func RevertMetadataSpecKey() string
```



<a name="SpecMetadata"></a>
## func [SpecMetadata](<https://github.com/formancehq/ledger/blob/main/internal/metadata.go#L17>)

```go
func SpecMetadata(name string) string
```



<a name="ValidateSegment"></a>
## func [ValidateSegment](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L46>)

```go
func ValidateSegment(addr string) bool
```



<a name="Account"></a>
## type [Account](<https://github.com/formancehq/ledger/blob/main/internal/account.go#L16-L26>)



```go
type Account struct {
    bun.BaseModel `bun:"table:accounts"`

    Address          string            `json:"address" bun:"address"`
    Metadata         metadata.Metadata `json:"metadata" bun:"metadata,type:jsonb,default:'{}'"`
    FirstUsage       time.Time         `json:"firstUsage" bun:"first_usage,type:timestamp without time zone,nullzero"`
    InsertionDate    time.Time         `json:"insertionDate" bun:"insertion_date,type:timestamp without time zone,nullzero"`
    UpdatedAt        time.Time         `json:"updatedAt" bun:"updated_at,type:timestamp without time zone,nullzero"`
    Volumes          VolumesByAssets   `json:"volumes,omitempty" bun:"volumes,scanonly"`
    EffectiveVolumes VolumesByAssets   `json:"effectiveVolumes,omitempty" bun:"effective_volumes,scanonly"`
}
```

<a name="Account.GetAddress"></a>
### func \(Account\) [GetAddress](<https://github.com/formancehq/ledger/blob/main/internal/account.go#L28>)

```go
func (a Account) GetAddress() string
```



<a name="AccountMetadata"></a>
## type [AccountMetadata](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L211>)



```go
type AccountMetadata map[string]metadata.Metadata
```

<a name="AccountWithDefaultMetadata"></a>
## type [AccountWithDefaultMetadata](<https://github.com/formancehq/ledger/blob/main/internal/account.go#L41-L44>)



```go
type AccountWithDefaultMetadata struct {
    *Account
    DefaultMetadata metadata.Metadata
}
```

<a name="AccountsVolumes"></a>
## type [AccountsVolumes](<https://github.com/formancehq/ledger/blob/main/internal/account.go#L32-L39>)



```go
type AccountsVolumes struct {
    bun.BaseModel `bun:"accounts_volumes"`

    Account string   `bun:"accounts_address,type:varchar"`
    Asset   string   `bun:"asset,type:varchar"`
    Input   *big.Int `bun:"input,type:numeric"`
    Output  *big.Int `bun:"output,type:numeric"`
}
```

<a name="AggregatedVolumes"></a>
## type [AggregatedVolumes](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L171-L173>)



```go
type AggregatedVolumes struct {
    Aggregated VolumesByAssets `bun:"aggregated,type:jsonb"`
}
```

<a name="Balances"></a>
## type [Balances](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L175>)



```go
type Balances = map[string]map[string]*big.Int
```

<a name="BalancesByAssets"></a>
## type [BalancesByAssets](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L97>)



```go
type BalancesByAssets map[string]*big.Int
```

<a name="BalancesByAssetsByAccounts"></a>
## type [BalancesByAssetsByAccounts](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L101>)



```go
type BalancesByAssetsByAccounts map[string]BalancesByAssets
```

<a name="ChartAccount"></a>
## type [ChartAccount](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L18-L21>)



```go
type ChartAccount struct {
    Metadata map[string]ChartAccountMetadata
    Rules    ChartAccountRules
}
```

<a name="ChartAccount.DefaultMetadata"></a>
### func \(\*ChartAccount\) [DefaultMetadata](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L318>)

```go
func (c *ChartAccount) DefaultMetadata() metadata.Metadata
```



<a name="ChartAccountMetadata"></a>
## type [ChartAccountMetadata](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L14-L16>)



```go
type ChartAccountMetadata struct {
    Default *string `json:"default,omitempty"`
}
```

<a name="ChartAccountRules"></a>
## type [ChartAccountRules](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L12>)



```go
type ChartAccountRules struct{}
```

<a name="ChartOfAccounts"></a>
## type [ChartOfAccounts](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L42>)



```go
type ChartOfAccounts map[string]ChartSegment
```

<a name="ChartOfAccounts.FindAccountSchema"></a>
### func \(\*ChartOfAccounts\) [FindAccountSchema](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L298>)

```go
func (c *ChartOfAccounts) FindAccountSchema(account string) (*ChartAccount, error)
```



<a name="ChartOfAccounts.MarshalJSON"></a>
### func \(ChartOfAccounts\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L188>)

```go
func (s ChartOfAccounts) MarshalJSON() ([]byte, error)
```



<a name="ChartOfAccounts.UnmarshalJSON"></a>
### func \(\*ChartOfAccounts\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L50>)

```go
func (s *ChartOfAccounts) UnmarshalJSON(data []byte) error
```



<a name="ChartOfAccounts.ValidatePosting"></a>
### func \(\*ChartOfAccounts\) [ValidatePosting](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L306>)

```go
func (c *ChartOfAccounts) ValidatePosting(posting Posting) error
```



<a name="ChartSegment"></a>
## type [ChartSegment](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L23-L27>)



```go
type ChartSegment struct {
    VariableSegment *ChartVariableSegment
    FixedSegments   map[string]ChartSegment
    Account         *ChartAccount
}
```

<a name="ChartSegment.MarshalJSON"></a>
### func \(ChartSegment\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L232>)

```go
func (s ChartSegment) MarshalJSON() ([]byte, error)
```



<a name="ChartSegment.UnmarshalJSON"></a>
### func \(\*ChartSegment\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L89>)

```go
func (s *ChartSegment) UnmarshalJSON(data []byte) error
```



<a name="ChartVariableSegment"></a>
## type [ChartVariableSegment](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L29-L34>)



```go
type ChartVariableSegment struct {
    ChartSegment

    Pattern *string
    Label   string
}
```

<a name="ChartVariableSegment.MarshalJSON"></a>
### func \(ChartVariableSegment\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/chart.go#L240>)

```go
func (s ChartVariableSegment) MarshalJSON() ([]byte, error)
```



<a name="Configuration"></a>
## type [Configuration](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L96-L100>)



```go
type Configuration struct {
    Bucket   string              `json:"bucket" bun:"bucket,type:varchar(255)"`
    Metadata metadata.Metadata   `json:"metadata" bun:"metadata,type:jsonb,nullzero"`
    Features features.FeatureSet `json:"features" bun:"features,type:jsonb"`
}
```

<a name="NewDefaultConfiguration"></a>
### func [NewDefaultConfiguration](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L127>)

```go
func NewDefaultConfiguration() Configuration
```



<a name="Configuration.SetDefaults"></a>
### func \(\*Configuration\) [SetDefaults](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L102>)

```go
func (c *Configuration) SetDefaults()
```



<a name="Configuration.Validate"></a>
### func \(\*Configuration\) [Validate](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L117>)

```go
func (c *Configuration) Validate() error
```



<a name="CreatedTransaction"></a>
## type [CreatedTransaction](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L213-L216>)



```go
type CreatedTransaction struct {
    Transaction     Transaction     `json:"transaction"`
    AccountMetadata AccountMetadata `json:"accountMetadata"`
}
```

<a name="CreatedTransaction.GetMemento"></a>
### func \(CreatedTransaction\) [GetMemento](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L237>)

```go
func (p CreatedTransaction) GetMemento() any
```



<a name="CreatedTransaction.NeedsSchema"></a>
### func \(CreatedTransaction\) [NeedsSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L218>)

```go
func (p CreatedTransaction) NeedsSchema() bool
```



<a name="CreatedTransaction.Type"></a>
### func \(CreatedTransaction\) [Type](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L231>)

```go
func (p CreatedTransaction) Type() LogType
```



<a name="CreatedTransaction.ValidateWithSchema"></a>
### func \(CreatedTransaction\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L221>)

```go
func (p CreatedTransaction) ValidateWithSchema(schema Schema) error
```



<a name="DeletedMetadata"></a>
## type [DeletedMetadata](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L318-L322>)



```go
type DeletedMetadata struct {
    TargetType string `json:"targetType"`
    TargetID   any    `json:"targetId"`
    Key        string `json:"key"`
}
```

<a name="DeletedMetadata.NeedsSchema"></a>
### func \(DeletedMetadata\) [NeedsSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L324>)

```go
func (p DeletedMetadata) NeedsSchema() bool
```



<a name="DeletedMetadata.Type"></a>
### func \(DeletedMetadata\) [Type](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L331>)

```go
func (s DeletedMetadata) Type() LogType
```



<a name="DeletedMetadata.UnmarshalJSON"></a>
### func \(\*DeletedMetadata\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L337>)

```go
func (s *DeletedMetadata) UnmarshalJSON(data []byte) error
```



<a name="DeletedMetadata.ValidateWithSchema"></a>
### func \(DeletedMetadata\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L327>)

```go
func (s DeletedMetadata) ValidateWithSchema(schema Schema) error
```



<a name="ErrAlreadyStarted"></a>
## type [ErrAlreadyStarted](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L76>)



```go
type ErrAlreadyStarted string
```

<a name="NewErrAlreadyStarted"></a>
### func [NewErrAlreadyStarted](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L87>)

```go
func NewErrAlreadyStarted(id string) ErrAlreadyStarted
```



<a name="ErrAlreadyStarted.Error"></a>
### func \(ErrAlreadyStarted\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L78>)

```go
func (e ErrAlreadyStarted) Error() string
```



<a name="ErrAlreadyStarted.Is"></a>
### func \(ErrAlreadyStarted\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L82>)

```go
func (e ErrAlreadyStarted) Is(err error) bool
```



<a name="ErrInvalidAccount"></a>
## type [ErrInvalidAccount](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L106-L111>)



```go
type ErrInvalidAccount struct {
    // contains filtered or unexported fields
}
```

<a name="ErrInvalidAccount.Error"></a>
### func \(ErrInvalidAccount\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L113>)

```go
func (e ErrInvalidAccount) Error() string
```



<a name="ErrInvalidAccount.Is"></a>
### func \(ErrInvalidAccount\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L126>)

```go
func (e ErrInvalidAccount) Is(err error) bool
```



<a name="ErrInvalidBucketName"></a>
## type [ErrInvalidBucketName](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L26-L29>)



```go
type ErrInvalidBucketName struct {
    // contains filtered or unexported fields
}
```

<a name="ErrInvalidBucketName.Error"></a>
### func \(ErrInvalidBucketName\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L31>)

```go
func (e ErrInvalidBucketName) Error() string
```



<a name="ErrInvalidBucketName.Is"></a>
### func \(ErrInvalidBucketName\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L35>)

```go
func (e ErrInvalidBucketName) Is(err error) bool
```



<a name="ErrInvalidLedgerName"></a>
## type [ErrInvalidLedgerName](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L8-L11>)



```go
type ErrInvalidLedgerName struct {
    // contains filtered or unexported fields
}
```

<a name="ErrInvalidLedgerName.Error"></a>
### func \(ErrInvalidLedgerName\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L13>)

```go
func (e ErrInvalidLedgerName) Error() string
```



<a name="ErrInvalidLedgerName.Is"></a>
### func \(ErrInvalidLedgerName\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L17>)

```go
func (e ErrInvalidLedgerName) Is(err error) bool
```



<a name="ErrInvalidSchema"></a>
## type [ErrInvalidSchema](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L91-L93>)



```go
type ErrInvalidSchema struct {
    // contains filtered or unexported fields
}
```

<a name="NewErrInvalidSchema"></a>
### func [NewErrInvalidSchema](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L102>)

```go
func NewErrInvalidSchema(err error) ErrInvalidSchema
```



<a name="ErrInvalidSchema.Error"></a>
### func \(ErrInvalidSchema\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L95>)

```go
func (e ErrInvalidSchema) Error() string
```



<a name="ErrInvalidSchema.Is"></a>
### func \(ErrInvalidSchema\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L98>)

```go
func (e ErrInvalidSchema) Is(err error) bool
```



<a name="ErrPipelineAlreadyExists"></a>
## type [ErrPipelineAlreadyExists](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L46>)

ErrPipelineAlreadyExists denotes a pipeline already created The store is in charge of returning this error on a failing call on Store.CreatePipeline

```go
type ErrPipelineAlreadyExists PipelineConfiguration
```

<a name="NewErrPipelineAlreadyExists"></a>
### func [NewErrPipelineAlreadyExists](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L57>)

```go
func NewErrPipelineAlreadyExists(pipelineConfiguration PipelineConfiguration) ErrPipelineAlreadyExists
```



<a name="ErrPipelineAlreadyExists.Error"></a>
### func \(ErrPipelineAlreadyExists\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L48>)

```go
func (e ErrPipelineAlreadyExists) Error() string
```



<a name="ErrPipelineAlreadyExists.Is"></a>
### func \(ErrPipelineAlreadyExists\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L52>)

```go
func (e ErrPipelineAlreadyExists) Is(err error) bool
```



<a name="ErrPipelineNotFound"></a>
## type [ErrPipelineNotFound](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L61>)



```go
type ErrPipelineNotFound string
```

<a name="NewErrPipelineNotFound"></a>
### func [NewErrPipelineNotFound](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L72>)

```go
func NewErrPipelineNotFound(id string) ErrPipelineNotFound
```



<a name="ErrPipelineNotFound.Error"></a>
### func \(ErrPipelineNotFound\) [Error](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L63>)

```go
func (e ErrPipelineNotFound) Error() string
```



<a name="ErrPipelineNotFound.Is"></a>
### func \(ErrPipelineNotFound\) [Is](<https://github.com/formancehq/ledger/blob/main/internal/errors.go#L67>)

```go
func (e ErrPipelineNotFound) Is(err error) bool
```



<a name="Exporter"></a>
## type [Exporter](<https://github.com/formancehq/ledger/blob/main/internal/exporter.go#L24-L30>)



```go
type Exporter struct {
    bun.BaseModel `bun:"table:_system.exporters"`

    ID        string    `json:"id" bun:"id,pk"`
    CreatedAt time.Time `json:"createdAt" bun:"created_at"`
    ExporterConfiguration
}
```

<a name="NewExporter"></a>
### func [NewExporter](<https://github.com/formancehq/ledger/blob/main/internal/exporter.go#L32>)

```go
func NewExporter(configuration ExporterConfiguration) Exporter
```



<a name="ExporterConfiguration"></a>
## type [ExporterConfiguration](<https://github.com/formancehq/ledger/blob/main/internal/exporter.go#L12-L15>)



```go
type ExporterConfiguration struct {
    Driver string          `json:"driver" bun:"driver"`
    Config json.RawMessage `json:"config" bun:"config"`
}
```

<a name="NewExporterConfiguration"></a>
### func [NewExporterConfiguration](<https://github.com/formancehq/ledger/blob/main/internal/exporter.go#L17>)

```go
func NewExporterConfiguration(driver string, config json.RawMessage) ExporterConfiguration
```



<a name="InsertedSchema"></a>
## type [InsertedSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L416-L418>)



```go
type InsertedSchema struct {
    Schema Schema `json:"schema"`
}
```

<a name="InsertedSchema.NeedsSchema"></a>
### func \(InsertedSchema\) [NeedsSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L420>)

```go
func (p InsertedSchema) NeedsSchema() bool
```



<a name="InsertedSchema.Type"></a>
### func \(InsertedSchema\) [Type](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L427>)

```go
func (u InsertedSchema) Type() LogType
```



<a name="InsertedSchema.ValidateWithSchema"></a>
### func \(InsertedSchema\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L423>)

```go
func (u InsertedSchema) ValidateWithSchema(schema Schema) error
```



<a name="Ledger"></a>
## type [Ledger](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L21-L30>)



```go
type Ledger struct {
    bun.BaseModel `bun:"_system.ledgers,alias:ledgers"`

    Configuration
    ID        int        `json:"id" bun:"id,type:int,scanonly"`
    Name      string     `json:"name" bun:"name,type:varchar(255),pk"`
    AddedAt   time.Time  `json:"addedAt" bun:"added_at,type:timestamp,nullzero"`
    State     string     `json:"-" bun:"state,type:varchar(255),nullzero"`
    DeletedAt *time.Time `json:"deletedAt,omitempty" bun:"deleted_at,type:timestamp,nullzero"`
}
```

<a name="MustNewWithDefault"></a>
### func [MustNewWithDefault](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L72>)

```go
func MustNewWithDefault(name string) Ledger
```



<a name="New"></a>
### func [New](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L45>)

```go
func New(name string, configuration Configuration) (*Ledger, error)
```



<a name="NewWithDefaults"></a>
### func [NewWithDefaults](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L68>)

```go
func NewWithDefaults(name string) (*Ledger, error)
```



<a name="Ledger.HasFeature"></a>
### func \(Ledger\) [HasFeature](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L32>)

```go
func (l Ledger) HasFeature(feature, value string) bool
```



<a name="Ledger.WithMetadata"></a>
### func \(Ledger\) [WithMetadata](<https://github.com/formancehq/ledger/blob/main/internal/ledger.go#L40>)

```go
func (l Ledger) WithMetadata(m metadata.Metadata) Ledger
```



<a name="Log"></a>
## type [Log](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L89-L102>)

Log represents atomic actions made on the ledger.

```go
type Log struct {
    bun.BaseModel `bun:"table:logs,alias:logs"`

    Type           LogType    `json:"type" bun:"type,type:log_type"`
    Data           LogPayload `json:"data" bun:"data,type:jsonb"`
    Date           time.Time  `json:"date" bun:"date,type:timestamptz,nullzero"`
    IdempotencyKey string     `json:"idempotencyKey" bun:"idempotency_key,type:varchar(256),unique,nullzero"`
    // IdempotencyHash is a signature used when using IdempotencyKey.
    // It allows checking if the usage of IdempotencyKey matches inputs given on the first idempotency key usage.
    IdempotencyHash string  `json:"idempotencyHash" bun:"idempotency_hash,unique,nullzero"`
    ID              *uint64 `json:"id" bun:"id,unique,type:numeric"`
    Hash            []byte  `json:"hash" bun:"hash,type:bytea"`
    SchemaVersion   string  `json:"schemaVersion,omitempty" bun:"schema_version,nullzero"`
}
```

<a name="NewLog"></a>
### func [NewLog](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L194>)

```go
func NewLog(payload LogPayload) Log
```



<a name="Log.ChainLog"></a>
### func \(Log\) [ChainLog](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L115>)

```go
func (l Log) ChainLog(previous *Log) Log
```



<a name="Log.ComputeHash"></a>
### func \(\*Log\) [ComputeHash](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L146>)

```go
func (l *Log) ComputeHash(previous *Log)
```



<a name="Log.UnmarshalJSON"></a>
### func \(\*Log\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L126>)

```go
func (l *Log) UnmarshalJSON(data []byte) error
```



<a name="Log.ValidateWithSchema"></a>
### func \(Log\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L190>)

```go
func (l Log) ValidateWithSchema(schema Schema) error
```



<a name="Log.WithDate"></a>
### func \(Log\) [WithDate](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L104>)

```go
func (l Log) WithDate(date time.Time) Log
```



<a name="Log.WithID"></a>
### func \(Log\) [WithID](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L185>)

```go
func (l Log) WithID(i uint64) Log
```



<a name="Log.WithIdempotencyKey"></a>
### func \(Log\) [WithIdempotencyKey](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L110>)

```go
func (l Log) WithIdempotencyKey(key string) Log
```



<a name="LogPayload"></a>
## type [LogPayload](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L201-L205>)



```go
type LogPayload interface {
    Type() LogType
    NeedsSchema() bool
    ValidateWithSchema(schema Schema) error
}
```

<a name="HydrateLog"></a>
### func [HydrateLog](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L433>)

```go
func HydrateLog(_type LogType, data []byte) (LogPayload, error)
```



<a name="LogType"></a>
## type [LogType](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L28>)



```go
type LogType int16
```

<a name="SetMetadataLogType"></a>

```go
const (
    SetMetadataLogType         LogType = iota // "SET_METADATA"
    NewTransactionLogType                     // "NEW_TRANSACTION"
    RevertedTransactionLogType                // "REVERTED_TRANSACTION"
    DeleteMetadataLogType                     // "DELETE_METADATA"
    InsertedSchemaLogType                     // "INSERTED_SCHEMA"
)
```

<a name="LogTypeFromString"></a>
### func [LogTypeFromString](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L71>)

```go
func LogTypeFromString(logType string) LogType
```



<a name="LogType.MarshalJSON"></a>
### func \(LogType\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L39>)

```go
func (lt LogType) MarshalJSON() ([]byte, error)
```



<a name="LogType.Scan"></a>
### func \(\*LogType\) [Scan](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L34>)

```go
func (lt *LogType) Scan(src interface{}) error
```



<a name="LogType.String"></a>
### func \(LogType\) [String](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L54>)

```go
func (lt LogType) String() string
```



<a name="LogType.UnmarshalJSON"></a>
### func \(\*LogType\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L43>)

```go
func (lt *LogType) UnmarshalJSON(data []byte) error
```



<a name="LogType.Value"></a>
### func \(LogType\) [Value](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L30>)

```go
func (lt LogType) Value() (driver.Value, error)
```



<a name="Memento"></a>
## type [Memento](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L207-L209>)



```go
type Memento interface {
    GetMemento() any
}
```

<a name="Move"></a>
## type [Move](<https://github.com/formancehq/ledger/blob/main/internal/moves.go#L13-L25>)



```go
type Move struct {
    bun.BaseModel `bun:"table:moves"`

    TransactionID              uint64              `bun:"transactions_id,type:bigint"`
    IsSource                   bool                `bun:"is_source,type:bool"`
    Account                    string              `bun:"accounts_address,type:varchar"`
    Amount                     *bunpaginate.BigInt `bun:"amount,type:numeric"`
    Asset                      string              `bun:"asset,type:varchar"`
    InsertionDate              time.Time           `bun:"insertion_date,type:timestamp,nullzero"`
    EffectiveDate              time.Time           `bun:"effective_date,type:timestamp,nullzero"`
    PostCommitVolumes          *Volumes            `bun:"post_commit_volumes,type:jsonb"`
    PostCommitEffectiveVolumes *Volumes            `bun:"post_commit_effective_volumes,type:jsonb,scanonly"`
}
```

<a name="Moves"></a>
## type [Moves](<https://github.com/formancehq/ledger/blob/main/internal/moves.go#L27>)



```go
type Moves []*Move
```

<a name="Moves.ComputePostCommitEffectiveVolumes"></a>
### func \(Moves\) [ComputePostCommitEffectiveVolumes](<https://github.com/formancehq/ledger/blob/main/internal/moves.go#L29>)

```go
func (m Moves) ComputePostCommitEffectiveVolumes() PostCommitVolumes
```



<a name="Pipeline"></a>
## type [Pipeline](<https://github.com/formancehq/ledger/blob/main/internal/pipeline.go#L28-L37>)



```go
type Pipeline struct {
    bun.BaseModel `bun:"table:_system.pipelines"`

    PipelineConfiguration
    CreatedAt time.Time `json:"createdAt" bun:"created_at"`
    ID        string    `json:"id" bun:"id,pk"`
    Enabled   bool      `json:"enabled" bun:"enabled"`
    LastLogID *uint64   `json:"lastLogID,omitempty" bun:"last_log_id"`
    Error     string    `json:"error,omitempty" bun:"error"`
}
```

<a name="NewPipeline"></a>
### func [NewPipeline](<https://github.com/formancehq/ledger/blob/main/internal/pipeline.go#L39>)

```go
func NewPipeline(pipelineConfiguration PipelineConfiguration) Pipeline
```



<a name="PipelineConfiguration"></a>
## type [PipelineConfiguration](<https://github.com/formancehq/ledger/blob/main/internal/pipeline.go#L12-L15>)



```go
type PipelineConfiguration struct {
    Ledger     string `json:"ledger" bun:"ledger"`
    ExporterID string `json:"exporterID" bun:"exporter_id"`
}
```

<a name="NewPipelineConfiguration"></a>
### func [NewPipelineConfiguration](<https://github.com/formancehq/ledger/blob/main/internal/pipeline.go#L21>)

```go
func NewPipelineConfiguration(ledger, exporterID string) PipelineConfiguration
```



<a name="PipelineConfiguration.String"></a>
### func \(PipelineConfiguration\) [String](<https://github.com/formancehq/ledger/blob/main/internal/pipeline.go#L17>)

```go
func (p PipelineConfiguration) String() string
```



<a name="PostCommitVolumes"></a>
## type [PostCommitVolumes](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L119>)



```go
type PostCommitVolumes map[string]VolumesByAssets
```

<a name="PostCommitVolumes.AddInput"></a>
### func \(PostCommitVolumes\) [AddInput](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L134>)

```go
func (a PostCommitVolumes) AddInput(account, asset string, input *big.Int)
```



<a name="PostCommitVolumes.AddOutput"></a>
### func \(PostCommitVolumes\) [AddOutput](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L140>)

```go
func (a PostCommitVolumes) AddOutput(account, asset string, output *big.Int)
```



<a name="PostCommitVolumes.Copy"></a>
### func \(PostCommitVolumes\) [Copy](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L146>)

```go
func (a PostCommitVolumes) Copy() PostCommitVolumes
```



<a name="PostCommitVolumes.Merge"></a>
### func \(PostCommitVolumes\) [Merge](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L154>)

```go
func (a PostCommitVolumes) Merge(volumes PostCommitVolumes) PostCommitVolumes
```



<a name="PostCommitVolumes.SubtractPostings"></a>
### func \(PostCommitVolumes\) [SubtractPostings](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L121>)

```go
func (a PostCommitVolumes) SubtractPostings(postings Postings) PostCommitVolumes
```



<a name="Posting"></a>
## type [Posting](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L11-L16>)



```go
type Posting struct {
    Source      string   `json:"source"`
    Destination string   `json:"destination"`
    Amount      *big.Int `json:"amount"`
    Asset       string   `json:"asset"`
}
```

<a name="NewPosting"></a>
### func [NewPosting](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L26>)

```go
func NewPosting(source string, destination string, asset string, amount *big.Int) Posting
```



<a name="Posting.GetDestination"></a>
### func \(Posting\) [GetDestination](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L22>)

```go
func (p Posting) GetDestination() string
```



<a name="Posting.GetSource"></a>
### func \(Posting\) [GetSource](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L18>)

```go
func (p Posting) GetSource() string
```



<a name="Postings"></a>
## type [Postings](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L35>)



```go
type Postings []Posting
```

<a name="Postings.Reverse"></a>
### func \(Postings\) [Reverse](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L37>)

```go
func (p Postings) Reverse() Postings
```



<a name="Postings.Validate"></a>
### func \(Postings\) [Validate](<https://github.com/formancehq/ledger/blob/main/internal/posting.go#L52>)

```go
func (p Postings) Validate() (int, error)
```



<a name="QueryMode"></a>
## type [QueryMode](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L26>)



```go
type QueryMode string
```

<a name="Sync"></a>

```go
const (
    Sync QueryMode = "sync"
)
```

<a name="QueryTemplate"></a>
## type [QueryTemplate](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L130-L137>)



```go
type QueryTemplate struct {
    Name     string              `json:"name,omitempty"`
    Resource ResourceKind        `json:"resource"`
    Mode     QueryMode           `json:"mode"`
    Params   QueryTemplateParams `json:"params"`
    Vars     map[string]VarSpec  `json:"vars"`
    Body     json.RawMessage     `json:"body"`
}
```

<a name="QueryTemplateParams"></a>
## type [QueryTemplateParams](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L59-L67>)



```go
type QueryTemplateParams struct {
    PIT        *time.Time
    OOT        *time.Time
    Expand     []string
    Opts       json.RawMessage
    SortColumn string
    SortOrder  *bunpaginate.Order
    PageSize   uint
}
```

<a name="QueryTemplateParams.Overwrite"></a>
### func \(\*QueryTemplateParams\) [Overwrite](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L106>)

```go
func (q *QueryTemplateParams) Overwrite(other QueryTemplateParams)
```



<a name="QueryTemplateParams.UnmarshalJSON"></a>
### func \(\*QueryTemplateParams\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L69>)

```go
func (q *QueryTemplateParams) UnmarshalJSON(data []byte) error
```



<a name="QueryTemplates"></a>
## type [QueryTemplates](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L32>)



```go
type QueryTemplates map[string]QueryTemplate
```

<a name="ResourceKind"></a>
## type [ResourceKind](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L17>)



```go
type ResourceKind string
```

<a name="ResourceKindTransactions"></a>

```go
const (
    ResourceKindTransactions ResourceKind = "transactions"
    ResourceKindAccounts     ResourceKind = "accounts"
    ResourceKindLogs         ResourceKind = "logs"
    ResourceKindVolumes      ResourceKind = "volumes"
)
```

<a name="RevertedTransaction"></a>
## type [RevertedTransaction](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L370-L373>)



```go
type RevertedTransaction struct {
    RevertedTransaction Transaction `json:"revertedTransaction"`
    RevertTransaction   Transaction `json:"transaction"`
}
```

<a name="RevertedTransaction.GetMemento"></a>
### func \(RevertedTransaction\) [GetMemento](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L388>)

```go
func (r RevertedTransaction) GetMemento() any
```



<a name="RevertedTransaction.NeedsSchema"></a>
### func \(RevertedTransaction\) [NeedsSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L375>)

```go
func (p RevertedTransaction) NeedsSchema() bool
```



<a name="RevertedTransaction.Type"></a>
### func \(RevertedTransaction\) [Type](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L382>)

```go
func (r RevertedTransaction) Type() LogType
```



<a name="RevertedTransaction.ValidateWithSchema"></a>
### func \(RevertedTransaction\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L378>)

```go
func (r RevertedTransaction) ValidateWithSchema(schema Schema) error
```



<a name="RunQueryTemplateParams"></a>
## type [RunQueryTemplateParams](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L54-L57>)



```go
type RunQueryTemplateParams struct {
    QueryTemplateParams
    Cursor string `json:"cursor"`
}
```

<a name="RuntimeType"></a>
## type [RuntimeType](<https://github.com/formancehq/ledger/blob/main/internal/transaction_templates.go#L8>)



```go
type RuntimeType string
```

<a name="RuntimeMachine"></a>

```go
const (
    RuntimeMachine                 RuntimeType = "machine"
    RuntimeExperimentalInterpreter RuntimeType = "experimental-interpreter"
)
```

<a name="SavedMetadata"></a>
## type [SavedMetadata](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L266-L270>)



```go
type SavedMetadata struct {
    TargetType string            `json:"targetType"`
    TargetID   any               `json:"targetId"`
    Metadata   metadata.Metadata `json:"metadata"`
}
```

<a name="SavedMetadata.NeedsSchema"></a>
### func \(SavedMetadata\) [NeedsSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L272>)

```go
func (p SavedMetadata) NeedsSchema() bool
```



<a name="SavedMetadata.Type"></a>
### func \(SavedMetadata\) [Type](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L279>)

```go
func (s SavedMetadata) Type() LogType
```



<a name="SavedMetadata.UnmarshalJSON"></a>
### func \(\*SavedMetadata\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L285>)

```go
func (s *SavedMetadata) UnmarshalJSON(data []byte) error
```



<a name="SavedMetadata.ValidateWithSchema"></a>
### func \(SavedMetadata\) [ValidateWithSchema](<https://github.com/formancehq/ledger/blob/main/internal/log.go#L275>)

```go
func (s SavedMetadata) ValidateWithSchema(schema Schema) error
```



<a name="Schema"></a>
## type [Schema](<https://github.com/formancehq/ledger/blob/main/internal/schema.go#L17-L23>)



```go
type Schema struct {
    bun.BaseModel `bun:"table:schemas,alias:schemas"`
    SchemaData

    Version   string    `json:"version" bun:"version"`
    CreatedAt time.Time `json:"createdAt" bun:"created_at,nullzero"`
}
```

<a name="NewSchema"></a>
### func [NewSchema](<https://github.com/formancehq/ledger/blob/main/internal/schema.go#L25>)

```go
func NewSchema(version string, data SchemaData) (Schema, error)
```



<a name="SchemaData"></a>
## type [SchemaData](<https://github.com/formancehq/ledger/blob/main/internal/schema.go#L11-L15>)



```go
type SchemaData struct {
    Chart        ChartOfAccounts      `json:"chart" bun:"chart"`
    Transactions TransactionTemplates `json:"transactions" bun:"transactions"`
    Queries      QueryTemplates       `json:"queries" bun:"queries"`
}
```

<a name="Transaction"></a>
## type [Transaction](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L38-L53>)



```go
type Transaction struct {
    bun.BaseModel `bun:"table:transactions,alias:transactions"`

    TransactionData
    ID         *uint64    `json:"id" bun:"id,type:numeric"`
    InsertedAt time.Time  `json:"insertedAt,omitempty" bun:"inserted_at,type:timestamp without time zone,nullzero"`
    UpdatedAt  time.Time  `json:"updatedAt,omitempty" bun:"updated_at,type:timestamp without time zone,nullzero"`
    RevertedAt *time.Time `json:"revertedAt,omitempty" bun:"reverted_at,type:timestamp without time zone"`
    // PostCommitVolumes are the volumes of each account/asset after a transaction has been committed.
    // Those volumes will never change as those are computed in flight.
    PostCommitVolumes PostCommitVolumes `json:"postCommitVolumes,omitempty" bun:"post_commit_volumes,type:jsonb"`
    // PostCommitEffectiveVolumes are the volumes of each account/asset after the transaction TransactionData.Timestamp.
    // Those volumes are also computed in flight, but can be updated if a transaction is inserted in the past.
    PostCommitEffectiveVolumes PostCommitVolumes `json:"postCommitEffectiveVolumes,omitempty" bun:"post_commit_effective_volumes,type:jsonb,scanonly"`
    Template                   string            `json:"template,omitempty" bun:"template,type:text"`
}
```

<a name="NewTransaction"></a>
### func [NewTransaction](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L234>)

```go
func NewTransaction() Transaction
```



<a name="Transaction.AccountsWithDefaultMetadata"></a>
### func \(\*Transaction\) [AccountsWithDefaultMetadata](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L240>)

```go
func (tx *Transaction) AccountsWithDefaultMetadata(schema *Schema, accountMetadata map[string]metadata.Metadata) []AccountWithDefaultMetadata
```



<a name="Transaction.InvolvedAccounts"></a>
### func \(Transaction\) [InvolvedAccounts](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L118>)

```go
func (tx Transaction) InvolvedAccounts() []string
```



<a name="Transaction.InvolvedDestinations"></a>
### func \(Transaction\) [InvolvedDestinations](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L104>)

```go
func (tx Transaction) InvolvedDestinations() map[string][]string
```



<a name="Transaction.IsReverted"></a>
### func \(Transaction\) [IsReverted](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L207>)

```go
func (tx Transaction) IsReverted() bool
```



<a name="Transaction.JSONSchemaExtend"></a>
### func \(Transaction\) [JSONSchemaExtend](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L55>)

```go
func (Transaction) JSONSchemaExtend(schema *jsonschema.Schema)
```



<a name="Transaction.MarshalJSON"></a>
### func \(Transaction\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L190>)

```go
func (tx Transaction) MarshalJSON() ([]byte, error)
```



<a name="Transaction.Reverse"></a>
### func \(Transaction\) [Reverse](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L64>)

```go
func (tx Transaction) Reverse() Transaction
```



<a name="Transaction.VolumeUpdates"></a>
### func \(Transaction\) [VolumeUpdates](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L129>)

```go
func (tx Transaction) VolumeUpdates() []AccountsVolumes
```



<a name="Transaction.WithID"></a>
### func \(Transaction\) [WithID](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L69>)

```go
func (tx Transaction) WithID(id uint64) Transaction
```



<a name="Transaction.WithInsertedAt"></a>
### func \(Transaction\) [WithInsertedAt](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L94>)

```go
func (tx Transaction) WithInsertedAt(date time.Time) Transaction
```



<a name="Transaction.WithMetadata"></a>
### func \(Transaction\) [WithMetadata](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L89>)

```go
func (tx Transaction) WithMetadata(m metadata.Metadata) Transaction
```



<a name="Transaction.WithPostCommitEffectiveVolumes"></a>
### func \(Transaction\) [WithPostCommitEffectiveVolumes](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L222>)

```go
func (tx Transaction) WithPostCommitEffectiveVolumes(volumes PostCommitVolumes) Transaction
```



<a name="Transaction.WithPostCommitVolumes"></a>
### func \(Transaction\) [WithPostCommitVolumes](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L216>)

```go
func (tx Transaction) WithPostCommitVolumes(volumes PostCommitVolumes) Transaction
```



<a name="Transaction.WithPostings"></a>
### func \(Transaction\) [WithPostings](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L74>)

```go
func (tx Transaction) WithPostings(postings ...Posting) Transaction
```



<a name="Transaction.WithReference"></a>
### func \(Transaction\) [WithReference](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L79>)

```go
func (tx Transaction) WithReference(ref string) Transaction
```



<a name="Transaction.WithRevertedAt"></a>
### func \(Transaction\) [WithRevertedAt](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L211>)

```go
func (tx Transaction) WithRevertedAt(timestamp time.Time) Transaction
```



<a name="Transaction.WithTemplate"></a>
### func \(Transaction\) [WithTemplate](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L99>)

```go
func (tx Transaction) WithTemplate(template string) Transaction
```



<a name="Transaction.WithTimestamp"></a>
### func \(Transaction\) [WithTimestamp](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L84>)

```go
func (tx Transaction) WithTimestamp(ts time.Time) Transaction
```



<a name="Transaction.WithUpdatedAt"></a>
### func \(Transaction\) [WithUpdatedAt](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L228>)

```go
func (tx Transaction) WithUpdatedAt(at time.Time) Transaction
```



<a name="TransactionData"></a>
## type [TransactionData](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L20-L25>)



```go
type TransactionData struct {
    Postings  Postings          `json:"postings" bun:"postings,type:jsonb"`
    Metadata  metadata.Metadata `json:"metadata" bun:"metadata,type:jsonb,default:'{}'"`
    Timestamp time.Time         `json:"timestamp" bun:"timestamp,type:timestamp without time zone,nullzero"`
    Reference string            `json:"reference,omitempty" bun:"reference,type:varchar,unique,nullzero"`
}
```

<a name="NewTransactionData"></a>
### func [NewTransactionData](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L32>)

```go
func NewTransactionData() TransactionData
```



<a name="TransactionData.WithPostings"></a>
### func \(TransactionData\) [WithPostings](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L27>)

```go
func (data TransactionData) WithPostings(postings ...Posting) TransactionData
```



<a name="TransactionTemplate"></a>
## type [TransactionTemplate](<https://github.com/formancehq/ledger/blob/main/internal/transaction_templates.go#L15-L19>)



```go
type TransactionTemplate struct {
    Description string      `json:"description"`
    Script      string      `json:"script"`
    Runtime     RuntimeType `json:"runtime,omitempty"`
}
```

<a name="TransactionTemplates"></a>
## type [TransactionTemplates](<https://github.com/formancehq/ledger/blob/main/internal/transaction_templates.go#L21>)



```go
type TransactionTemplates map[string]TransactionTemplate
```

<a name="TransactionTemplates.Validate"></a>
### func \(TransactionTemplates\) [Validate](<https://github.com/formancehq/ledger/blob/main/internal/transaction_templates.go#L23>)

```go
func (t TransactionTemplates) Validate() error
```



<a name="Transactions"></a>
## type [Transactions](<https://github.com/formancehq/ledger/blob/main/internal/transaction.go#L16-L18>)



```go
type Transactions struct {
    Transactions []TransactionData `json:"transactions"`
}
```

<a name="VarSpec"></a>
## type [VarSpec](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L34-L37>)



```go
type VarSpec struct {
    Type    string  `json:"type,omitempty"`
    Default *string `json:"default"`
}
```

<a name="VarSpec.UnmarshalJSON"></a>
### func \(\*VarSpec\) [UnmarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/query_template.go#L39>)

```go
func (p *VarSpec) UnmarshalJSON(b []byte) error
```



<a name="Volumes"></a>
## type [Volumes](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L13-L16>)



```go
type Volumes struct {
    Input  *big.Int `json:"input"`
    Output *big.Int `json:"output"`
}
```

<a name="NewEmptyVolumes"></a>
### func [NewEmptyVolumes](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L53>)

```go
func NewEmptyVolumes() Volumes
```



<a name="NewVolumesInt64"></a>
### func [NewVolumesInt64](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L57>)

```go
func NewVolumesInt64(input, output int64) Volumes
```



<a name="Volumes.Balance"></a>
### func \(Volumes\) [Balance](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L86>)

```go
func (v Volumes) Balance() *big.Int
```



<a name="Volumes.Copy"></a>
### func \(Volumes\) [Copy](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L46>)

```go
func (v Volumes) Copy() Volumes
```



<a name="Volumes.JSONSchemaExtend"></a>
### func \(Volumes\) [JSONSchemaExtend](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L41>)

```go
func (Volumes) JSONSchemaExtend(schema *jsonschema.Schema)
```



<a name="Volumes.MarshalJSON"></a>
### func \(Volumes\) [MarshalJSON](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L78>)

```go
func (v Volumes) MarshalJSON() ([]byte, error)
```



<a name="Volumes.Scan"></a>
### func \(\*Volumes\) [Scan](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L22>)

```go
func (v *Volumes) Scan(src interface{}) error
```



<a name="Volumes.Value"></a>
### func \(Volumes\) [Value](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L18>)

```go
func (v Volumes) Value() (driver.Value, error)
```



<a name="VolumesByAssets"></a>
## type [VolumesByAssets](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L99>)



```go
type VolumesByAssets map[string]Volumes
```

<a name="VolumesByAssets.Balances"></a>
### func \(VolumesByAssets\) [Balances](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L103>)

```go
func (v VolumesByAssets) Balances() BalancesByAssets
```



<a name="VolumesWithBalance"></a>
## type [VolumesWithBalance](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L70-L74>)



```go
type VolumesWithBalance struct {
    Input   *big.Int `json:"input" bun:"input"`
    Output  *big.Int `json:"output" bun:"output"`
    Balance *big.Int `json:"balance" bun:"balance"`
}
```

<a name="VolumesWithBalanceByAssetByAccount"></a>
## type [VolumesWithBalanceByAssetByAccount](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L64-L68>)



```go
type VolumesWithBalanceByAssetByAccount struct {
    Account string `json:"account" bun:"account"`
    Asset   string `json:"asset" bun:"asset"`
    VolumesWithBalance
}
```

<a name="VolumesWithBalanceByAssets"></a>
## type [VolumesWithBalanceByAssets](<https://github.com/formancehq/ledger/blob/main/internal/volumes.go#L76>)



```go
type VolumesWithBalanceByAssets map[string]*VolumesWithBalance
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
