// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package components

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/formancehq/ledger/pkg/client/internal/utils"
	"github.com/formancehq/ledger/pkg/client/types"
	"time"
)

type V2QueryResource string

const (
	V2QueryResourceTransactions V2QueryResource = "transactions"
	V2QueryResourceAccounts     V2QueryResource = "accounts"
	V2QueryResourceLogs         V2QueryResource = "logs"
	V2QueryResourceVolumes      V2QueryResource = "volumes"
)

func (e V2QueryResource) ToPointer() *V2QueryResource {
	return &e
}
func (e *V2QueryResource) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "transactions":
		fallthrough
	case "accounts":
		fallthrough
	case "logs":
		fallthrough
	case "volumes":
		*e = V2QueryResource(v)
		return nil
	default:
		return fmt.Errorf("invalid value for V2QueryResource: %v", v)
	}
}

type Opts struct {
	UseInsertionDate any `json:"useInsertionDate,omitempty"`
	GroupLvl         any `json:"groupLvl,omitempty"`
}

func (o *Opts) GetUseInsertionDate() any {
	if o == nil {
		return nil
	}
	return o.UseInsertionDate
}

func (o *Opts) GetGroupLvl() any {
	if o == nil {
		return nil
	}
	return o.GroupLvl
}

type QueryTemplateVolumeParams struct {
	resource *string `const:"volumes" json:"resource,omitempty"`
	Opts     *Opts   `json:"opts,omitempty"`
	// The maximum number of results to return per page.
	//
	PageSize *int64 `json:"pageSize,omitempty"`
	// Parameter used in pagination requests. Maximum page size is set to 15.
	// Set to the value of next for the next page of results.
	// Set to the value of previous for the previous page of results.
	// No other parameters can be set when this parameter is set.
	//
	Cursor *string    `json:"cursor,omitempty"`
	Expand *string    `json:"expand,omitempty"`
	Pit    *time.Time `json:"pit,omitempty"`
	// Sort results using a field name and order (ascending or descending).
	// Format: `<field>:<order>`, where `<field>` is the field name and `<order>` is either `asc` or `desc`.
	//
	Sort any `json:"sort,omitempty"`
}

func (q QueryTemplateVolumeParams) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(q, "", false)
}

func (q *QueryTemplateVolumeParams) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &q, "", false, true); err != nil {
		return err
	}
	return nil
}

func (o *QueryTemplateVolumeParams) GetResource() *string {
	return types.String("volumes")
}

func (o *QueryTemplateVolumeParams) GetOpts() *Opts {
	if o == nil {
		return nil
	}
	return o.Opts
}

func (o *QueryTemplateVolumeParams) GetPageSize() *int64 {
	if o == nil {
		return nil
	}
	return o.PageSize
}

func (o *QueryTemplateVolumeParams) GetCursor() *string {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *QueryTemplateVolumeParams) GetExpand() *string {
	if o == nil {
		return nil
	}
	return o.Expand
}

func (o *QueryTemplateVolumeParams) GetPit() *time.Time {
	if o == nil {
		return nil
	}
	return o.Pit
}

func (o *QueryTemplateVolumeParams) GetSort() any {
	if o == nil {
		return nil
	}
	return o.Sort
}

type QueryTemplateLogParams struct {
	resource *string `const:"logs" json:"resource,omitempty"`
	// The maximum number of results to return per page.
	//
	PageSize *int64 `json:"pageSize,omitempty"`
	// Parameter used in pagination requests. Maximum page size is set to 15.
	// Set to the value of next for the next page of results.
	// Set to the value of previous for the previous page of results.
	// No other parameters can be set when this parameter is set.
	//
	Cursor *string    `json:"cursor,omitempty"`
	Expand *string    `json:"expand,omitempty"`
	Pit    *time.Time `json:"pit,omitempty"`
	// Sort results using a field name and order (ascending or descending).
	// Format: `<field>:<order>`, where `<field>` is the field name and `<order>` is either `asc` or `desc`.
	//
	Sort any `json:"sort,omitempty"`
}

func (q QueryTemplateLogParams) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(q, "", false)
}

func (q *QueryTemplateLogParams) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &q, "", false, true); err != nil {
		return err
	}
	return nil
}

func (o *QueryTemplateLogParams) GetResource() *string {
	return types.String("logs")
}

func (o *QueryTemplateLogParams) GetPageSize() *int64 {
	if o == nil {
		return nil
	}
	return o.PageSize
}

func (o *QueryTemplateLogParams) GetCursor() *string {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *QueryTemplateLogParams) GetExpand() *string {
	if o == nil {
		return nil
	}
	return o.Expand
}

func (o *QueryTemplateLogParams) GetPit() *time.Time {
	if o == nil {
		return nil
	}
	return o.Pit
}

func (o *QueryTemplateLogParams) GetSort() any {
	if o == nil {
		return nil
	}
	return o.Sort
}

type QueryTemplateTransactionParams struct {
	resource *string `const:"transactions" json:"resource,omitempty"`
	// The maximum number of results to return per page.
	//
	PageSize *int64 `json:"pageSize,omitempty"`
	// Parameter used in pagination requests. Maximum page size is set to 15.
	// Set to the value of next for the next page of results.
	// Set to the value of previous for the previous page of results.
	// No other parameters can be set when this parameter is set.
	//
	Cursor *string    `json:"cursor,omitempty"`
	Expand *string    `json:"expand,omitempty"`
	Pit    *time.Time `json:"pit,omitempty"`
	// Sort results using a field name and order (ascending or descending).
	// Format: `<field>:<order>`, where `<field>` is the field name and `<order>` is either `asc` or `desc`.
	//
	Sort any `json:"sort,omitempty"`
}

func (q QueryTemplateTransactionParams) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(q, "", false)
}

func (q *QueryTemplateTransactionParams) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &q, "", false, true); err != nil {
		return err
	}
	return nil
}

func (o *QueryTemplateTransactionParams) GetResource() *string {
	return types.String("transactions")
}

func (o *QueryTemplateTransactionParams) GetPageSize() *int64 {
	if o == nil {
		return nil
	}
	return o.PageSize
}

func (o *QueryTemplateTransactionParams) GetCursor() *string {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *QueryTemplateTransactionParams) GetExpand() *string {
	if o == nil {
		return nil
	}
	return o.Expand
}

func (o *QueryTemplateTransactionParams) GetPit() *time.Time {
	if o == nil {
		return nil
	}
	return o.Pit
}

func (o *QueryTemplateTransactionParams) GetSort() any {
	if o == nil {
		return nil
	}
	return o.Sort
}

type QueryTemplateAccountParams struct {
	resource *string `const:"accounts" json:"resource,omitempty"`
	// The maximum number of results to return per page.
	//
	PageSize *int64 `json:"pageSize,omitempty"`
	// Parameter used in pagination requests. Maximum page size is set to 15.
	// Set to the value of next for the next page of results.
	// Set to the value of previous for the previous page of results.
	// No other parameters can be set when this parameter is set.
	//
	Cursor *string    `json:"cursor,omitempty"`
	Expand *string    `json:"expand,omitempty"`
	Pit    *time.Time `json:"pit,omitempty"`
	// Sort results using a field name and order (ascending or descending).
	// Format: `<field>:<order>`, where `<field>` is the field name and `<order>` is either `asc` or `desc`.
	//
	Sort any `json:"sort,omitempty"`
}

func (q QueryTemplateAccountParams) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(q, "", false)
}

func (q *QueryTemplateAccountParams) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &q, "", false, true); err != nil {
		return err
	}
	return nil
}

func (o *QueryTemplateAccountParams) GetResource() *string {
	return types.String("accounts")
}

func (o *QueryTemplateAccountParams) GetPageSize() *int64 {
	if o == nil {
		return nil
	}
	return o.PageSize
}

func (o *QueryTemplateAccountParams) GetCursor() *string {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *QueryTemplateAccountParams) GetExpand() *string {
	if o == nil {
		return nil
	}
	return o.Expand
}

func (o *QueryTemplateAccountParams) GetPit() *time.Time {
	if o == nil {
		return nil
	}
	return o.Pit
}

func (o *QueryTemplateAccountParams) GetSort() any {
	if o == nil {
		return nil
	}
	return o.Sort
}

type ParamsType string

const (
	ParamsTypeQueryTemplateAccountParams     ParamsType = "QueryTemplateAccountParams"
	ParamsTypeQueryTemplateTransactionParams ParamsType = "QueryTemplateTransactionParams"
	ParamsTypeQueryTemplateLogParams         ParamsType = "QueryTemplateLogParams"
	ParamsTypeQueryTemplateVolumeParams      ParamsType = "QueryTemplateVolumeParams"
)

type Params struct {
	QueryTemplateAccountParams     *QueryTemplateAccountParams     `queryParam:"inline"`
	QueryTemplateTransactionParams *QueryTemplateTransactionParams `queryParam:"inline"`
	QueryTemplateLogParams         *QueryTemplateLogParams         `queryParam:"inline"`
	QueryTemplateVolumeParams      *QueryTemplateVolumeParams      `queryParam:"inline"`

	Type ParamsType
}

func CreateParamsQueryTemplateAccountParams(queryTemplateAccountParams QueryTemplateAccountParams) Params {
	typ := ParamsTypeQueryTemplateAccountParams

	return Params{
		QueryTemplateAccountParams: &queryTemplateAccountParams,
		Type:                       typ,
	}
}

func CreateParamsQueryTemplateTransactionParams(queryTemplateTransactionParams QueryTemplateTransactionParams) Params {
	typ := ParamsTypeQueryTemplateTransactionParams

	return Params{
		QueryTemplateTransactionParams: &queryTemplateTransactionParams,
		Type:                           typ,
	}
}

func CreateParamsQueryTemplateLogParams(queryTemplateLogParams QueryTemplateLogParams) Params {
	typ := ParamsTypeQueryTemplateLogParams

	return Params{
		QueryTemplateLogParams: &queryTemplateLogParams,
		Type:                   typ,
	}
}

func CreateParamsQueryTemplateVolumeParams(queryTemplateVolumeParams QueryTemplateVolumeParams) Params {
	typ := ParamsTypeQueryTemplateVolumeParams

	return Params{
		QueryTemplateVolumeParams: &queryTemplateVolumeParams,
		Type:                      typ,
	}
}

func (u *Params) UnmarshalJSON(data []byte) error {

	var queryTemplateAccountParams QueryTemplateAccountParams = QueryTemplateAccountParams{}
	if err := utils.UnmarshalJSON(data, &queryTemplateAccountParams, "", true, true); err == nil {
		u.QueryTemplateAccountParams = &queryTemplateAccountParams
		u.Type = ParamsTypeQueryTemplateAccountParams
		return nil
	}

	var queryTemplateTransactionParams QueryTemplateTransactionParams = QueryTemplateTransactionParams{}
	if err := utils.UnmarshalJSON(data, &queryTemplateTransactionParams, "", true, true); err == nil {
		u.QueryTemplateTransactionParams = &queryTemplateTransactionParams
		u.Type = ParamsTypeQueryTemplateTransactionParams
		return nil
	}

	var queryTemplateLogParams QueryTemplateLogParams = QueryTemplateLogParams{}
	if err := utils.UnmarshalJSON(data, &queryTemplateLogParams, "", true, true); err == nil {
		u.QueryTemplateLogParams = &queryTemplateLogParams
		u.Type = ParamsTypeQueryTemplateLogParams
		return nil
	}

	var queryTemplateVolumeParams QueryTemplateVolumeParams = QueryTemplateVolumeParams{}
	if err := utils.UnmarshalJSON(data, &queryTemplateVolumeParams, "", true, true); err == nil {
		u.QueryTemplateVolumeParams = &queryTemplateVolumeParams
		u.Type = ParamsTypeQueryTemplateVolumeParams
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for Params", string(data))
}

func (u Params) MarshalJSON() ([]byte, error) {
	if u.QueryTemplateAccountParams != nil {
		return utils.MarshalJSON(u.QueryTemplateAccountParams, "", true)
	}

	if u.QueryTemplateTransactionParams != nil {
		return utils.MarshalJSON(u.QueryTemplateTransactionParams, "", true)
	}

	if u.QueryTemplateLogParams != nil {
		return utils.MarshalJSON(u.QueryTemplateLogParams, "", true)
	}

	if u.QueryTemplateVolumeParams != nil {
		return utils.MarshalJSON(u.QueryTemplateVolumeParams, "", true)
	}

	return nil, errors.New("could not marshal union type Params: all fields are null")
}

type V2QueryTemplate struct {
	Name            any                           `json:"name,omitempty"`
	V2QueryResource *V2QueryResource              `json:"resource,omitempty"`
	Params          *Params                       `json:"params,omitempty"`
	Vars            map[string]V2QueryTemplateVar `json:"vars,omitempty"`
	Body            map[string]any                `json:"body,omitempty"`
}

func (o *V2QueryTemplate) GetName() any {
	if o == nil {
		return nil
	}
	return o.Name
}

func (o *V2QueryTemplate) GetV2QueryResource() *V2QueryResource {
	if o == nil {
		return nil
	}
	return o.V2QueryResource
}

func (o *V2QueryTemplate) GetParams() *Params {
	if o == nil {
		return nil
	}
	return o.Params
}

func (o *V2QueryTemplate) GetVars() map[string]V2QueryTemplateVar {
	if o == nil {
		return nil
	}
	return o.Vars
}

func (o *V2QueryTemplate) GetBody() map[string]any {
	if o == nil {
		return nil
	}
	return o.Body
}
