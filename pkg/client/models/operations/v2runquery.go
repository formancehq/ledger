// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package operations

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/formancehq/ledger/pkg/client/internal/utils"
	"github.com/formancehq/ledger/pkg/client/models/components"
	"time"
)

// V2RunQueryQueryParamOrder - Deprecated: Use sort param
type V2RunQueryQueryParamOrder string

const (
	V2RunQueryQueryParamOrderEffective V2RunQueryQueryParamOrder = "effective"
)

func (e V2RunQueryQueryParamOrder) ToPointer() *V2RunQueryQueryParamOrder {
	return &e
}
func (e *V2RunQueryQueryParamOrder) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "effective":
		*e = V2RunQueryQueryParamOrder(v)
		return nil
	default:
		return fmt.Errorf("invalid value for V2RunQueryQueryParamOrder: %v", v)
	}
}

type V2RunQueryRequestBody struct {
	Cursor any               `json:"cursor,omitempty"`
	Params any               `json:"params,omitempty"`
	Vars   map[string]string `json:"vars,omitempty"`
}

func (o *V2RunQueryRequestBody) GetCursor() any {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *V2RunQueryRequestBody) GetParams() any {
	if o == nil {
		return nil
	}
	return o.Params
}

func (o *V2RunQueryRequestBody) GetVars() map[string]string {
	if o == nil {
		return nil
	}
	return o.Vars
}

type V2RunQueryRequest struct {
	// Name of the ledger.
	Ledger string `pathParam:"style=simple,explode=false,name=ledger"`
	// Schema version to use for validation
	SchemaVersion string `queryParam:"style=form,explode=true,name=schemaVersion"`
	// Query template ID.
	ID string `pathParam:"style=simple,explode=false,name=id"`
	// The maximum number of results to return per page.
	//
	PageSize *int64 `queryParam:"style=form,explode=true,name=pageSize"`
	// Parameter used in pagination requests. Maximum page size is set to 15.
	// Set to the value of next for the next page of results.
	// Set to the value of previous for the previous page of results.
	// No other parameters can be set when this parameter is set.
	//
	Cursor *string    `queryParam:"style=form,explode=true,name=cursor"`
	Expand *string    `queryParam:"style=form,explode=true,name=expand"`
	Pit    *time.Time `queryParam:"style=form,explode=true,name=pit"`
	// Deprecated: Use sort param
	//
	// Deprecated: This will be removed in a future release, please migrate away from it as soon as possible.
	Order   *V2RunQueryQueryParamOrder `queryParam:"style=form,explode=true,name=order"`
	Reverse *bool                      `queryParam:"style=form,explode=true,name=reverse"`
	// Sort results using a field name and order (ascending or descending).
	// Format: `<field>:<order>`, where `<field>` is the field name and `<order>` is either `asc` or `desc`.
	//
	Sort        *string               `queryParam:"style=form,explode=true,name=sort"`
	RequestBody V2RunQueryRequestBody `request:"mediaType=application/json"`
}

func (v V2RunQueryRequest) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(v, "", false)
}

func (v *V2RunQueryRequest) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &v, "", false, false); err != nil {
		return err
	}
	return nil
}

func (o *V2RunQueryRequest) GetLedger() string {
	if o == nil {
		return ""
	}
	return o.Ledger
}

func (o *V2RunQueryRequest) GetSchemaVersion() string {
	if o == nil {
		return ""
	}
	return o.SchemaVersion
}

func (o *V2RunQueryRequest) GetID() string {
	if o == nil {
		return ""
	}
	return o.ID
}

func (o *V2RunQueryRequest) GetPageSize() *int64 {
	if o == nil {
		return nil
	}
	return o.PageSize
}

func (o *V2RunQueryRequest) GetCursor() *string {
	if o == nil {
		return nil
	}
	return o.Cursor
}

func (o *V2RunQueryRequest) GetExpand() *string {
	if o == nil {
		return nil
	}
	return o.Expand
}

func (o *V2RunQueryRequest) GetPit() *time.Time {
	if o == nil {
		return nil
	}
	return o.Pit
}

func (o *V2RunQueryRequest) GetOrder() *V2RunQueryQueryParamOrder {
	if o == nil {
		return nil
	}
	return o.Order
}

func (o *V2RunQueryRequest) GetReverse() *bool {
	if o == nil {
		return nil
	}
	return o.Reverse
}

func (o *V2RunQueryRequest) GetSort() *string {
	if o == nil {
		return nil
	}
	return o.Sort
}

func (o *V2RunQueryRequest) GetRequestBody() V2RunQueryRequestBody {
	if o == nil {
		return V2RunQueryRequestBody{}
	}
	return o.RequestBody
}

type V2RunQueryResponseBodyType string

const (
	V2RunQueryResponseBodyTypeV2TransactionsCursorResponse       V2RunQueryResponseBodyType = "V2TransactionsCursorResponse"
	V2RunQueryResponseBodyTypeV2AccountsCursorResponse           V2RunQueryResponseBodyType = "V2AccountsCursorResponse"
	V2RunQueryResponseBodyTypeV2LogsCursorResponse               V2RunQueryResponseBodyType = "V2LogsCursorResponse"
	V2RunQueryResponseBodyTypeV2VolumesWithBalanceCursorResponse V2RunQueryResponseBodyType = "V2VolumesWithBalanceCursorResponse"
)

// V2RunQueryResponseBody - OK
type V2RunQueryResponseBody struct {
	V2TransactionsCursorResponse       *components.V2TransactionsCursorResponse       `queryParam:"inline"`
	V2AccountsCursorResponse           *components.V2AccountsCursorResponse           `queryParam:"inline"`
	V2LogsCursorResponse               *components.V2LogsCursorResponse               `queryParam:"inline"`
	V2VolumesWithBalanceCursorResponse *components.V2VolumesWithBalanceCursorResponse `queryParam:"inline"`

	Type V2RunQueryResponseBodyType
}

func CreateV2RunQueryResponseBodyV2TransactionsCursorResponse(v2TransactionsCursorResponse components.V2TransactionsCursorResponse) V2RunQueryResponseBody {
	typ := V2RunQueryResponseBodyTypeV2TransactionsCursorResponse

	return V2RunQueryResponseBody{
		V2TransactionsCursorResponse: &v2TransactionsCursorResponse,
		Type:                         typ,
	}
}

func CreateV2RunQueryResponseBodyV2AccountsCursorResponse(v2AccountsCursorResponse components.V2AccountsCursorResponse) V2RunQueryResponseBody {
	typ := V2RunQueryResponseBodyTypeV2AccountsCursorResponse

	return V2RunQueryResponseBody{
		V2AccountsCursorResponse: &v2AccountsCursorResponse,
		Type:                     typ,
	}
}

func CreateV2RunQueryResponseBodyV2LogsCursorResponse(v2LogsCursorResponse components.V2LogsCursorResponse) V2RunQueryResponseBody {
	typ := V2RunQueryResponseBodyTypeV2LogsCursorResponse

	return V2RunQueryResponseBody{
		V2LogsCursorResponse: &v2LogsCursorResponse,
		Type:                 typ,
	}
}

func CreateV2RunQueryResponseBodyV2VolumesWithBalanceCursorResponse(v2VolumesWithBalanceCursorResponse components.V2VolumesWithBalanceCursorResponse) V2RunQueryResponseBody {
	typ := V2RunQueryResponseBodyTypeV2VolumesWithBalanceCursorResponse

	return V2RunQueryResponseBody{
		V2VolumesWithBalanceCursorResponse: &v2VolumesWithBalanceCursorResponse,
		Type:                               typ,
	}
}

func (u *V2RunQueryResponseBody) UnmarshalJSON(data []byte) error {

	var v2TransactionsCursorResponse components.V2TransactionsCursorResponse = components.V2TransactionsCursorResponse{}
	if err := utils.UnmarshalJSON(data, &v2TransactionsCursorResponse, "", true, true); err == nil {
		u.V2TransactionsCursorResponse = &v2TransactionsCursorResponse
		u.Type = V2RunQueryResponseBodyTypeV2TransactionsCursorResponse
		return nil
	}

	var v2AccountsCursorResponse components.V2AccountsCursorResponse = components.V2AccountsCursorResponse{}
	if err := utils.UnmarshalJSON(data, &v2AccountsCursorResponse, "", true, true); err == nil {
		u.V2AccountsCursorResponse = &v2AccountsCursorResponse
		u.Type = V2RunQueryResponseBodyTypeV2AccountsCursorResponse
		return nil
	}

	var v2LogsCursorResponse components.V2LogsCursorResponse = components.V2LogsCursorResponse{}
	if err := utils.UnmarshalJSON(data, &v2LogsCursorResponse, "", true, true); err == nil {
		u.V2LogsCursorResponse = &v2LogsCursorResponse
		u.Type = V2RunQueryResponseBodyTypeV2LogsCursorResponse
		return nil
	}

	var v2VolumesWithBalanceCursorResponse components.V2VolumesWithBalanceCursorResponse = components.V2VolumesWithBalanceCursorResponse{}
	if err := utils.UnmarshalJSON(data, &v2VolumesWithBalanceCursorResponse, "", true, true); err == nil {
		u.V2VolumesWithBalanceCursorResponse = &v2VolumesWithBalanceCursorResponse
		u.Type = V2RunQueryResponseBodyTypeV2VolumesWithBalanceCursorResponse
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for V2RunQueryResponseBody", string(data))
}

func (u V2RunQueryResponseBody) MarshalJSON() ([]byte, error) {
	if u.V2TransactionsCursorResponse != nil {
		return utils.MarshalJSON(u.V2TransactionsCursorResponse, "", true)
	}

	if u.V2AccountsCursorResponse != nil {
		return utils.MarshalJSON(u.V2AccountsCursorResponse, "", true)
	}

	if u.V2LogsCursorResponse != nil {
		return utils.MarshalJSON(u.V2LogsCursorResponse, "", true)
	}

	if u.V2VolumesWithBalanceCursorResponse != nil {
		return utils.MarshalJSON(u.V2VolumesWithBalanceCursorResponse, "", true)
	}

	return nil, errors.New("could not marshal union type V2RunQueryResponseBody: all fields are null")
}

type V2RunQueryResponse struct {
	HTTPMeta components.HTTPMetadata `json:"-"`
	// OK
	OneOf *V2RunQueryResponseBody
}

func (o *V2RunQueryResponse) GetHTTPMeta() components.HTTPMetadata {
	if o == nil {
		return components.HTTPMetadata{}
	}
	return o.HTTPMeta
}

func (o *V2RunQueryResponse) GetOneOf() *V2RunQueryResponseBody {
	if o == nil {
		return nil
	}
	return o.OneOf
}
